<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring Boot JWT demo | jwt-spring-boot-template</title>
    <meta name="generator" content="VuePress 1.5.1">
    
    <meta name="description" content="template for Spring Boot REST JWT auth">
    <link rel="preload" href="/jwt-spring-boot-template/assets/css/0.styles.2751438a.css" as="style"><link rel="preload" href="/jwt-spring-boot-template/assets/js/app.e0ca9e97.js" as="script"><link rel="preload" href="/jwt-spring-boot-template/assets/js/2.85e5d991.js" as="script"><link rel="preload" href="/jwt-spring-boot-template/assets/js/5.215eb5d1.js" as="script"><link rel="prefetch" href="/jwt-spring-boot-template/assets/js/3.1aeedeb0.js"><link rel="prefetch" href="/jwt-spring-boot-template/assets/js/4.1a9da7e5.js">
    <link rel="stylesheet" href="/jwt-spring-boot-template/assets/css/0.styles.2751438a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jwt-spring-boot-template/" aria-current="page" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">jwt-spring-boot-template</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/jwt-spring-boot-template/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/jwt-spring-boot-template/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/jwt-spring-boot-template/" aria-current="page" class="active sidebar-link">Spring Boot JWT demo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jwt-spring-boot-template/#goals" class="sidebar-link">Goals</a></li><li class="sidebar-sub-header"><a href="/jwt-spring-boot-template/#getting-started" class="sidebar-link">Getting Started</a></li><li class="sidebar-sub-header"><a href="/jwt-spring-boot-template/#urls" class="sidebar-link">URLs</a></li><li class="sidebar-sub-header"><a href="/jwt-spring-boot-template/#dockerized-mysql" class="sidebar-link">Dockerized mySQL</a></li><li class="sidebar-sub-header"><a href="/jwt-spring-boot-template/#data-initialization-with-spring-jpa" class="sidebar-link">Data initialization with Spring JPA</a></li><li class="sidebar-sub-header"><a href="/jwt-spring-boot-template/#jwt" class="sidebar-link">JWT</a></li><li class="sidebar-sub-header"><a href="/jwt-spring-boot-template/#testing-with-rester" class="sidebar-link">Testing with RESTer</a></li><li class="sidebar-sub-header"><a href="/jwt-spring-boot-template/#about-vuepress" class="sidebar-link">About Vuepress</a></li><li class="sidebar-sub-header"><a href="/jwt-spring-boot-template/#wrapping-it-up" class="sidebar-link">Wrapping it up</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="spring-boot-jwt-demo"><a href="#spring-boot-jwt-demo" class="header-anchor">#</a> Spring Boot JWT demo</h1> <p>This is the first article in a series to illustrate the use of JWT tokens with Spring Boot REST API.</p> <h2 id="goals"><a href="#goals" class="header-anchor">#</a> Goals</h2> <p>In this project we will demonstrate:</p> <ul><li>JWT authorization with Spring Boot REST API</li> <li>Externalized mySQL deployment via docker</li> <li>local deployment of Spring Boot app (for development and demo purposes)</li> <li>a brief instroduction of Vuepress as a document building platform</li></ul> <p>Inspired by the excellent <a href="https://bezkoder.com/spring-boot-jwt-authentication/" target="_blank" rel="noopener noreferrer">Spring Boot tutorial<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> by <a href="https://github.com/bezkoder" target="_blank" rel="noopener noreferrer">Bezkoder<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Original Github repository <a href="https://github.com/bezkoder/spring-boot-spring-security-jwt-authentication" target="_blank" rel="noopener noreferrer">available here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting Started</h2> <p>In this project, the application can be run in two ways:</p> <ul><li>as a regular Spring Boot Application from your IDE</li> <li>as a standalone Docker container, with its own image</li></ul> <p>Either way will depend on the database services already available when the app starts.</p> <p>We're using version 3 of docker-compose, which makes it harder to define a startup order (by using <a href="https://docs.docker.com/engine/reference/builder/#healthcheck" target="_blank" rel="noopener noreferrer">healthchecks<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, for instance).</p> <p>So we'll keep this simple by running the database services in a separate process:</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; docker-compose up adminer db

</code></pre></div><p>The coomand will start two services: mysql and adminer.</p> <p>You can check if everything is ok, by accessing <a href="http://localhost:8081" target="_blank" rel="noopener noreferrer">Adminer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, which is lean administration tool for mysql.</p> <p>If you have other services running on your machine, you might need to tweak port mappings to avoid any clashes.</p> <h3 id="running-from-the-ide"><a href="#running-from-the-ide" class="header-anchor">#</a> Running from the IDE</h3> <p>If you haven't done it already, load the project into your IDE, then run JwtTemplateApplication, and wait for the proper logging messages to show up on your console.</p> <img src="/jwt-spring-boot-template/images/2020-07-04_JWT_04.png" alt="running fro IDE"> <p>By using the IDE, you may debug the application instead of simply running it.  This allows for inspection of variables, and step through the lines of code, which is a great learning technique.</p> <h3 id="running-as-a-standalone-docker-container"><a href="#running-as-a-standalone-docker-container" class="header-anchor">#</a> Running as a standalone Docker container</h3> <p>We also provide an example to run the application as a separate Docker container.</p> <p>If you decide to run it as from the IDE, you may skip directly to the <a href="/jwt-spring-boot-template/#urls">URLs section</a></p> <p>There are multiple ways of achieve this.</p> <p>We could run it as a JAR file, or maybe via the mvn spring-boot:run plugin.</p> <p>We chose instead to run it as a WAR on Tomcat, and here is its Dockerfile:</p> <div class="language- extra-class"><pre class="language-text"><code>FROM tomcat:latest
ENV spring.profiles.active=prod
ADD target/jwt-spring-boot-template.war /usr/local/tomcat/webapps/
EXPOSE 8080
CMD [&quot;catalina.sh&quot;, &quot;run&quot;]
</code></pre></div><p>Note that the <strong>spring.profiles.active</strong> environment variable is set to <strong>prod</strong></p> <p>This makes Spring Boot load <em>application-prod.properties</em>:</p> <div class="language- extra-class"><pre class="language-text"><code>spring.datasource.url= jdbc:mysql://db:3306/jwt_template
</code></pre></div><p>The jdbc url has been adjusted to <strong>db</strong>, which is also our database service name  on <strong>docker-compose.yml</strong>:</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-text"><code># Use root/example as user/password credentials
version: '3.1'

services:
  adminer:
    image: adminer
    restart: always
    ports:
      - 8081:8080
    depends_on:
      - &quot;db&quot;
  app:
    build: .
    image: jwt-spring-boot-template-img
    ports:
      - 8082:8080
    depends_on:
      - &quot;db&quot;
  db:
    image: mysql:8.0.20
    command: --default-authentication-plugin=mysql_native_password
    restart: always
    ports:
      - 3306:3306
    environment:
      MYSQL_DATABASE: jwt_template
      MYSQL_ROOT_PASSWORD: jwt_template


</code></pre></div><p>Before running the container, we need to build the application WAR</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; mvnw clean package

...

[INFO] Results:
[INFO]
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO]
[INFO] --- maven-war-plugin:3.2.3:war (default-war) @ jwt ---
[INFO] Packaging webapp
[INFO] Assembling webapp [jwt] in [C:\pub\jwt-spring-boot-template\target\jwt-spring-boot-template]
[INFO] Processing war project
[INFO] Webapp assembled in [42044 msecs]
[INFO] Building war: C:\pub\jwt-spring-boot-template\target\jwt-spring-boot-template.war
[INFO]
[INFO] --- spring-boot-maven-plugin:2.3.0.RELEASE:repackage (repackage) @ jwt ---
[INFO] Replacing main artifact with repackaged archive
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  01:05 min
[INFO] Finished at: 2020-07-04T21:58:58-03:00
[INFO] ------------------------------------------------------------------------

</code></pre></div><p>We need database services up and running to get all tests to properly run.</p> <p>Now that the WAR is in place, we need to build the image and start the container:</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-text"><code>docker-compose up --build app 

...

Step 1/5 : FROM tomcat:latest
 ---&gt; 2eb5a120304e
Step 2/5 : ENV spring.profiles.active=prod
 ---&gt; Using cache
 ---&gt; d61399f7e4c5
Step 3/5 : ADD target/jwt-spring-boot-template.war /usr/local/tomcat/webapps/
 ---&gt; 93ab1ba175eb
Step 4/5 : EXPOSE 8080
 ---&gt; Running in 74700d2fed48
Removing intermediate container 74700d2fed48
 ---&gt; 58a269e9f08a
Step 5/5 : CMD [&quot;catalina.sh&quot;, &quot;run&quot;]
 ---&gt; Running in d2665ea69221
Removing intermediate container d2665ea69221
 ---&gt; 56c32281496d
Successfully built 56c32281496d
Successfully tagged jwt-spring-boot-template-img:latest
jwt-spring-boot-template_db_1 is up-to-date
Creating jwt-spring-boot-template_app_1 ... done
Attaching to jwt-spring-boot-template_app_1

...

app_1      | 2020-07-05 01:02:57.287  INFO 1 --- [           main] DeferredRepositoryInitializationListener : Spring Data repositories initialized!
app_1      | 2020-07-05 01:02:57.288  INFO 1 --- [           main] b.poa.marcosilva.jwt.ServletInitializer  : Started ServletInitializer in 0.794 seconds (JVM running for 14.917)
app_1      | 05-Jul-2020 01:02:57.343 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [/usr/local/tomcat/webapps/jwt-spring-boot-template.war] has finished in [12,916] ms
app_1      | 05-Jul-2020 01:02:57.349 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;http-nio-8080&quot;]
app_1      | 05-Jul-2020 01:02:57.371 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in [13,131] milliseconds

</code></pre></div><p>You're ready to go when you see the <em>Catalina Server startup</em> message.</p> <h2 id="urls"><a href="#urls" class="header-anchor">#</a> URLs</h2> <p>These are the URLs and listening ports for services</p> <table><thead><tr><th style="text-align:right;">service</th> <th style="text-align:center;">base url:port</th> <th style="text-align:left;">obs</th></tr></thead> <tbody><tr><td style="text-align:right;">app</td> <td style="text-align:center;"><a href="http://localhost:8082" target="_blank" rel="noopener noreferrer">localhost:8082<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">either from IDE or .\mvnw spring:run</td></tr> <tr><td style="text-align:right;">app</td> <td style="text-align:center;"><a href="http://localhost:8082/spring-boot-template" target="_blank" rel="noopener noreferrer">localhost:8082/spring-boot-template<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">as a standalone Docker container</td></tr> <tr><td style="text-align:right;">Adminer</td> <td style="text-align:center;"><a href="http://localhost:8081" target="_blank" rel="noopener noreferrer">localhost:8081<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">after docker-compose</td></tr> <tr><td style="text-align:right;">mysql</td> <td style="text-align:center;"><a href="http://localhost:3306" target="_blank" rel="noopener noreferrer">localhost:3306<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">after docker-compose</td></tr> <tr><td style="text-align:right;">vuepress</td> <td style="text-align:center;"><a href="http://localhost:8083" target="_blank" rel="noopener noreferrer">localhost:8083<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td style="text-align:left;">after yarn docs:dev</td></tr></tbody></table> <h2 id="dockerized-mysql"><a href="#dockerized-mysql" class="header-anchor">#</a> Dockerized mySQL</h2> <p>A common approach in Spring Boot is to use H2 (in-memory or disk-based) persistence for development.  That's just fine for prototyping and very small-scale projects.</p> <p>But as an exercise, we decided to use a dockerized mySQL service instead.</p> <h2 id="data-initialization-with-spring-jpa"><a href="#data-initialization-with-spring-jpa" class="header-anchor">#</a> Data initialization with Spring JPA</h2> <p>The data model in this project is quite simple, but still there are a few points that need attention.</p> <p>Spring Boot data initialization runs <strong>resources/data.sql</strong>.</p> <p>Here's an excerpt from <strong>resources/application.properties</strong></p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br></div><pre class="language-text"><code>spring.datasource.url= jdbc:mysql://localhost:3306/jwt_template
spring.datasource.username= root
spring.datasource.password= jwt_template

server.port=8082

spring.jpa.properties.hibernate.dialect= org.hibernate.dialect.MySQL5Dialect

spring.datasource.initialization-mode=always
spring.jpa.hibernate.ddl-auto= create-drop
</code></pre></div><p>As indicated by the highlights, data and schema will be refreshed after each restart.</p> <p>This is fine for an example, but might not be appropriate for most use cases.</p> <p>Though not used in the project, <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/jdbc/Sql.html" target="_blank" rel="noopener noreferrer">Spring Boot's @Sql annotation <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> might come in handy while developing tests, <a href="https://www.baeldung.com/spring-boot-data-sql-and-schema-sql" target="_blank" rel="noopener noreferrer">as described here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="jwt"><a href="#jwt" class="header-anchor">#</a> JWT</h2> <p>From the <a href="https://tools.ietf.org/html/rfc7519" target="_blank" rel="noopener noreferrer">IETF definition<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>JSON Web Token (JWT) is a compact, URL-safe means of representing claims to be transferred between two parties.</p></blockquote> <p>In-depth information on Spring Security <a href="https://docs.spring.io/spring-security/site/docs/current/reference/html5/" target="_blank" rel="noopener noreferrer">can be found here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="testing-with-rester"><a href="#testing-with-rester" class="header-anchor">#</a> Testing with RESTer</h2> <p>Using <a href="https://chrome.google.com/webstore/detail/rester/eejfoncpjfgmeleakejdcanedmefagga?hl=en" target="_blank" rel="noopener noreferrer">RESTer Chrome plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for testing the API.</p> <p>Don't forget to:</p> <ul><li>set the Content-type to <strong>application-json</strong> on header</li> <li>change the proper url if you're using Docker instead of the IDE to deploy the app</li></ul> <img src="/jwt-spring-boot-template/images/RESTerJWT_01.png" alt="RESTer content-type on header"> <h3 id="signup-method"><a href="#signup-method" class="header-anchor">#</a> signup method</h3> <table><thead><tr><th style="text-align:left;">url</th> <th style="text-align:center;">method</th></tr></thead> <tbody><tr><td style="text-align:left;">http://localhost:8082/api/auth/signup</td> <td style="text-align:center;">POST</td></tr></tbody></table> <p>payload</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span><span class="token string">&quot;mod&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;email&quot;</span><span class="token operator">:</span><span class="token string">&quot;mod@marcosilva.poa.br&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span><span class="token string">&quot;123456789&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;role&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;mod&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="/jwt-spring-boot-template/images/RESTerJWT_02.png" alt="RESTer signup ok"> <p>Because we use Spring Boot's <strong>create-drop</strong> data strategy, the signup method can be called once per username/password combination.</p> <p>Of course, if you restart the app, the same combination can be used again.</p> <p>You can check that after the first call on the same session, the method will fail.</p> <img src="/jwt-spring-boot-template/images/RESTerJWT_03.png" alt="RESTer signup error"> <h3 id="signin-method"><a href="#signin-method" class="header-anchor">#</a> signin method</h3> <p>After the sign up, we can retrieve our JWT token.</p> <table><thead><tr><th style="text-align:left;">url</th> <th style="text-align:center;">method</th></tr></thead> <tbody><tr><td style="text-align:left;">http://localhost:8082/api/auth/signin</td> <td style="text-align:center;">POST</td></tr></tbody></table> <p>payload</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span><span class="token string">&quot;mod&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span><span class="token string">&quot;123456789&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The response will provide you with the accessToken in its JSON body:</p> <img src="/jwt-spring-boot-template/images/RESTerJWT_04.png" alt="RESTer signup error"> <h2 id="about-vuepress"><a href="#about-vuepress" class="header-anchor">#</a> About Vuepress</h2> <p>Before leaving, we'd like to mention <a href="https://vuepress.vuejs.org/" target="_blank" rel="noopener noreferrer">Vuepress<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, which is a nice static site generator, specifically aimed at documentation of technical projects.</p> <p>Static sites are great for <a href="https://www.webopedia.com/TERM/C/CDN.html#:~:text=A%20content%20delivery%20network%20is,and%20the%20content%20delivery%20server." target="_blank" rel="noopener noreferrer">CDNs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, such as <a href="https://www.netlify.com/" target="_blank" rel="noopener noreferrer">netlify<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Help for Vuepress configuration options <a href="https://vuepress.vuejs.org/config" target="_blank" rel="noopener noreferrer">can be found here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Markdown extensions are <a href="https://vuepress.vuejs.org/guide/markdown.htm" target="_blank" rel="noopener noreferrer">described here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="wrapping-it-up"><a href="#wrapping-it-up" class="header-anchor">#</a> Wrapping it up</h2> <p>That's it.  Getting the token is basically how far we'll cover for now.</p> <p>If you're interested in learning how to use the access token in a frontend app, please wait for the next article in this series.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/jwt-spring-boot-template/assets/js/app.e0ca9e97.js" defer></script><script src="/jwt-spring-boot-template/assets/js/2.85e5d991.js" defer></script><script src="/jwt-spring-boot-template/assets/js/5.215eb5d1.js" defer></script>
  </body>
</html>
